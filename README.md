# 中国热门新闻CLI工具 📰

一个简单的Node.js命令行工具，用于抓取并展示中国热门新闻。

## 功能特性

### 命令行模式 (CLI)
- ✅ 抓取百度热搜实时数据
- ⚠️  微博热搜（API限制，暂时不可用）
- ✅ 抓取头条热榜（通过RSSHub）
- ✅ 抓取36Kr快讯
- ✅ 抓取少数派热榜
- ✅ 自动计算昨天的日期
- ✅ 使用 `date-fns` 处理时间
- ✅ 使用 `axios` 发起HTTP请求
- ✅ 使用 `chalk` 美化终端输出
- ✅ 显示新闻标题和链接

### Web界面模式 🆕
- ✅ 支持5个数据源切换
- ✅ 美观的网页界面展示热搜数据
- ✅ 点击新闻卡片查看详细信息
- ✅ 响应式设计，支持移动端
- ✅ 实时刷新功能
- ✅ RESTful API端点

## 支持的新闻源 🆕

| 数据源 | CLI模式 | Web模式 | 状态 |
|--------|---------|---------|------|
| 百度热搜 | ✅ | ✅ | 稳定可用 |
| 微博热搜 | ⚠️ | ⚠️ | API限制 |
| 头条热榜 | ✅ | ✅ | 部分可用 |
| 36Kr快讯 | ✅ | ✅ | 测试中 |
| 少数派热榜 | ✅ | ✅ | 通过RSSHub |

## 安装依赖

```bash
npm install
```

## 使用的依赖

- `axios` - HTTP客户端，用于获取API数据
- `cheerio` - HTML解析器（用于网页抓取）
- `date-fns` - 日期处理库
- `chalk` - 终端输出美化工具
- `express` - Web服务器框架 🆕

## 运行方式

### 🖥️ 命令行模式

#### 方式1：使用npm脚本
```bash
npm start
```

#### 方式2：直接运行
```bash
node index.js
```

#### 方式3：全局安装（可选）
```bash
npm link
news  # 可以在任何地方运行
```

### 🌐 Web界面模式 🆕

#### 启动Web服务器
```bash
npm run web
```

然后访问: **http://localhost:3000**

#### API端点

```bash
# 获取百度热搜
curl http://localhost:3000/api/baidu-hot

# 获取微博热搜
curl http://localhost:3000/api/weibo-hot
```

#### Web界面功能
- 🔄 实时刷新热搜数据
- 🔀 百度热搜/微博热搜快速切换
- 📱 点击卡片查看详情弹窗
- 📊 热度值智能格式化（万、亿）
- 🎨 渐变色彩设计
- 📱 响应式布局

## 输出示例

```
📰 中国热门新闻抓取工具
当前日期: 2026年01月02日
抓取日期: 2026-01-01

════════════════════════════════════════
    百度热搜 - 2026-01-01
════════════════════════════════════════

01. 中国车企在欧洲卖爆了
    https://www.baidu.com/s?wd=中国车企在欧洲卖爆了

02. 天宫与神州同框的中国式浪漫
    https://www.baidu.com/s?wd=天宫与神州同框的中国式浪漫

...

✅ 数据抓取完成！
```

## 新闻源说明

本项目使用了免费的公开API：

- **百度热搜**: `https://api.1314.cool/getbaiduhot/`
  - 提供实时热搜数据
  - 更新频率：约每3分钟
  - 返回30条热搜数据
  - ✅ 当前可用

- **微博热搜**: 多个API源（自动尝试）
  - 由于微博API限制和反爬虫措施
  - ⚠️  目前大部分免费API已失效
  - 工具会自动尝试多个源并显示友好提示

## 注意事项

1. **API稳定性**: 该工具使用的是第三方免费API，可能存在不稳定的情况
2. **微博限制**: 微博热搜API受到严格的反爬虫限制（403错误），这是平台故意设置的防护措施
3. **百度可用**: 百度热搜API目前稳定可用
4. **建议添加错误处理和重试机制**
5. **请遵守相关API的使用条款和限制**

## 微博热搜API情况说明

### 当前状况
- 大部分免费微博热搜API已失效或需要认证
- 微博平台有严格的反爬虫措施
- 直接抓取微博页面会遇到403禁止访问

### 替代方案

如果需要微博热搜数据，可以考虑：

1. **付费API服务**
   - [天聚数行 TianAPI](https://www.tianapi.com/apiview/100) - 提供免费额度
   - [ALAPI](https://www.alapi.cn/api/16/api_document)

2. **自建爬虫**
   - 使用 [DailyHotApi](https://github.com/imsyy/DailyHotApi) 部署自己的热搜API
   - 支持多平台聚合

3. **浏览器自动化**
   - 使用 Puppeteer 或 Selenium
   - 模拟真实浏览器访问

## 后续改进建议

- [x] 支持百度热搜
- [ ] 微博热搜（需要付费API或自建服务）
- [ ] 添加缓存机制减少API请求
- [ ] 支持自定义日期查询
- [ ] 添加过滤关键词功能
- [ ] 导出为JSON/CSV格式
- [ ] 支持配置文件

## 许可证

MIT
